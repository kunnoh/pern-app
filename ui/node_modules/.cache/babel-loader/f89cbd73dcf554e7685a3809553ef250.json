{"ast":null,"code":"import _slicedToArray from \"/home/projects/pern-app/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/projects/pern-app/ui/src/components/auth/register/register.js\";\nimport React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport './register.js';\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { login } from \"../../../actions/auth.actions\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: theme.spacing(2),\n      '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px'\n      },\n      '& .MuiButtonBase-root': {\n        margin: theme.spacing(2)\n      }\n    }\n  };\n});\nexport default function Login(props) {\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      currentUser = _useSelector.user;\n\n  var form = useRef();\n  var classes = useStyles();\n  var dispatch = useDispatch(); // create state variables\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      firstname = _useState2[0],\n      setFirstname = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lastname = _useState4[0],\n      setLastname = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      password = _useState8[0],\n      setPassword = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      loading = _useState10[0],\n      setLoading = _useState10[1];\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.auth;\n  }),\n      isLoggedIn = _useSelector2.isLoggedIn;\n\n  var _useSelector3 = useSelector(function (state) {\n    return state.message;\n  }),\n      message = _useSelector3.message;\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    dispatch(login(email, password)).then(function () {\n      props.history.push(\"/\");\n      window.location.reload();\n    }).catch(function () {\n      setLoading(false);\n    });\n  };\n\n  if (currentUser) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex column flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    ref: form,\n    className: classes.root,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, \"register new account\"), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }, message)), /*#__PURE__*/React.createElement(TextField, {\n    label: \"firstname\",\n    variant: \"filled\",\n    type: \"text\",\n    value: firstname,\n    onChange: function onChange(e) {\n      return setFirstname(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"lastname\",\n    variant: \"filled\",\n    type: \"text\",\n    value: lastname,\n    onChange: function onChange(e) {\n      return setLastname(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Email\",\n    variant: \"filled\",\n    type: \"email\",\n    required: true,\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Password\",\n    variant: \"filled\",\n    type: \"password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, \"register\"))), loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-center spinner-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, \"loading ...\")));\n}","map":{"version":3,"names":["React","useState","useRef","useDispatch","useSelector","Navigate","Button","TextField","makeStyles","login","useStyles","theme","root","display","flexDirection","justifyContent","alignItems","padding","spacing","margin","width","Login","props","state","auth","currentUser","user","form","classes","dispatch","firstname","setFirstname","lastname","setLastname","email","setEmail","password","setPassword","loading","setLoading","isLoggedIn","message","handleSubmit","e","preventDefault","then","history","push","window","location","reload","catch","target","value"],"sources":["/home/projects/pern-app/ui/src/components/auth/register/register.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport './register.js';\n\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { login } from \"../../../actions/auth.actions\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: theme.spacing(2),\n        '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px',\n        },\n        '& .MuiButtonBase-root': {\n        margin: theme.spacing(2),\n        },\n    },\n}));\n\nexport default function Login(props) {\n    const { user: currentUser } = useSelector((state) => state.auth);\n    const form = useRef();\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    // create state variables\n    const [firstname, setFirstname] = useState('');\n    const [lastname, setLastname] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [loading, setLoading] = useState(false);\n    const { isLoggedIn } = useSelector(state => state.auth);\n    const { message } = useSelector(state => state.message);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        setLoading(true);\n        dispatch(login(email, password))\n            .then(() => {\n                props.history.push(\"/\");\n                window.location.reload();\n            }).catch(() => {\n                setLoading(false);\n            }\n        );\n    };\n  \n    if(currentUser) {\n        return <Navigate to=\"/\"/>\n    }\n\n    return(\n        <div className='flex column flex-center'>\n            <form \n                ref={form}\n                className={classes.root}\n                onSubmit={handleSubmit}>\n                <h2>register new account</h2>\n\n                {message && (\n                    <div className=\"alert-danger\" role=\"alert\">\n                        <span>{message}</span>\n                    </div>\n                )}\n                <TextField\n                    label=\"firstname\"\n                    variant=\"filled\"\n                    type=\"text\"\n                    value={firstname}\n                    onChange={e => setFirstname(e.target.value)}\n                    required\n                />\n                <TextField\n                    label=\"lastname\"\n                    variant=\"filled\"\n                    type=\"text\"\n                    value={lastname}\n                    onChange={e => setLastname(e.target.value)}\n                    required\n                />\n\n                <TextField \n                    label=\"Email\"\n                    variant=\"filled\"\n                    type=\"email\"\n                    required\n                    value={email}\n                    onChange={e => setEmail(e.target.value)}\n                />\n                <TextField\n                    label=\"Password\"\n                    variant=\"filled\"\n                    type=\"password\"\n                    value={password}\n                    onChange={e => setPassword(e.target.value)}\n                    required\n                />\n\n                <div className='btn-wrapper'> \n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                        register\n                    </Button>\n                </div>\n            </form>\n            {loading && (\n                <div className=\"flex flex-center spinner-wrapper\">\n                    <span>loading ...</span>\n                </div>\n            )}\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}