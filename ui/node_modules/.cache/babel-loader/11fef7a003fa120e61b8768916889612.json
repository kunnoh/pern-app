{"ast":null,"code":"import _slicedToArray from \"/home/projects/pern-app/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/projects/pern-app/ui/src/components/auth/forgot-password/forgot-password.js\";\nimport React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport './forgot-password';\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { login } from \"../../../actions/auth.actions\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      paddingTop: '60px',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: theme.spacing(2),\n      '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px'\n      },\n      '& .MuiButtonBase-root': {\n        margin: theme.spacing(2)\n      }\n    }\n  };\n});\nexport default function ForgotPassword(props) {\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      currentUser = _useSelector.user;\n\n  var form = useRef();\n  var classes = useStyles();\n  var dispatch = useDispatch(); // create state variables\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.auth;\n  }),\n      isLoggedIn = _useSelector2.isLoggedIn;\n\n  var _useSelector3 = useSelector(function (state) {\n    return state.message;\n  }),\n      message = _useSelector3.message;\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    dispatch(login(email)).then(function () {\n      props.history.push(\"/\");\n      window.location.reload();\n    }).catch(function () {\n      setLoading(false);\n    });\n  };\n\n  if (isLoggedIn) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 16\n      }\n    });\n  }\n\n  if (currentUser) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex column flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    ref: form,\n    className: classes.root,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, \"reset password\"), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, message)), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Email\",\n    variant: \"filled\",\n    type: \"email\",\n    required: true,\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, \"send reset email\"))), loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-center spinner-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, \"loading ...\")));\n}","map":{"version":3,"names":["React","useState","useRef","useDispatch","useSelector","Navigate","Link","Button","TextField","makeStyles","login","useStyles","theme","root","display","paddingTop","flexDirection","justifyContent","alignItems","padding","spacing","margin","width","ForgotPassword","props","state","auth","currentUser","user","form","classes","dispatch","email","setEmail","loading","setLoading","isLoggedIn","message","handleSubmit","e","preventDefault","then","history","push","window","location","reload","catch","target","value"],"sources":["/home/projects/pern-app/ui/src/components/auth/forgot-password/forgot-password.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\n\nimport './forgot-password';\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { login } from \"../../../actions/auth.actions\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        paddingTop: '60px',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: theme.spacing(2),\n        '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px',\n        },\n        '& .MuiButtonBase-root': {\n        margin: theme.spacing(2),\n        },\n    },\n}));\n\nexport default function ForgotPassword(props) {\n    const { user: currentUser } = useSelector((state) => state.auth);\n    const form = useRef();\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    // create state variables\n    const [email, setEmail] = useState('');\n    const [loading, setLoading] = useState(false);\n    const { isLoggedIn } = useSelector(state => state.auth);\n    const { message } = useSelector(state => state.message);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        setLoading(true);\n        dispatch(login(email))\n            .then(() => {\n                props.history.push(\"/\");\n                window.location.reload();\n            }).catch(() => {\n                setLoading(false);\n            }\n        );\n    };\n    \n    if (isLoggedIn) {\n        return <Navigate to=\"/\" />;\n    }\n  \n    if(currentUser) {\n        return <Navigate to=\"/\"/>\n    }\n    return(\n        <div className='flex column flex-center'>\n            <form \n                ref={form}\n                className={classes.root}\n                onSubmit={handleSubmit}>\n                <h2>reset password</h2>\n\n                {message && (\n                    <div className=\"alert-danger\" role=\"alert\">\n                        <span>{message}</span>\n                    </div>\n                )}\n\n                <TextField \n                    label=\"Email\"\n                    variant=\"filled\"\n                    type=\"email\"\n                    required\n                    value={email}\n                    onChange={e => setEmail(e.target.value)}\n                />\n\n                <div className='flex column'>\n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                        send reset email\n                    </Button>\n                </div>\n            </form>\n            {loading && (\n                <div className=\"flex flex-center spinner-wrapper\">\n                    <span>loading ...</span>\n                </div>\n            )}\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}