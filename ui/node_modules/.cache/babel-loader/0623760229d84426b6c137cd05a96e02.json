{"ast":null,"code":"import _slicedToArray from \"/home/projects/pern-app/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/projects/pern-app/ui/src/components/auth/login.js\";\nimport React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport './login.css';\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { login } from \"../../actions/auth.actions\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      paddingTop: '60px',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: theme.spacing(2),\n      '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px'\n      },\n      '& .MuiButtonBase-root': {\n        margin: theme.spacing(2)\n      }\n    }\n  };\n});\nexport default function Login(props) {\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      currentUser = _useSelector.user;\n\n  var form = useRef();\n  var classes = useStyles();\n  var dispatch = useDispatch(); // create state variables\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.auth;\n  }),\n      isLoggedIn = _useSelector2.isLoggedIn;\n\n  var _useSelector3 = useSelector(function (state) {\n    return state.message;\n  }),\n      message = _useSelector3.message;\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    dispatch(login(email, password)).then(function () {\n      props.history.push(\"/\");\n      window.location.reload();\n    }).catch(function () {\n      setLoading(false);\n    });\n  };\n\n  if (isLoggedIn) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 16\n      }\n    });\n  }\n\n  if (currentUser) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex column flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    ref: form,\n    className: classes.root,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, \"User login\"), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, message)), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Email\",\n    variant: \"filled\",\n    type: \"email\",\n    required: true,\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Password\",\n    variant: \"filled\",\n    type: \"password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"forgot password\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, \"create new account\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, \"login\"))), loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-center spinner-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, \"loading ...\")));\n}","map":{"version":3,"names":["React","useState","useRef","useDispatch","useSelector","Navigate","Button","TextField","makeStyles","login","useStyles","theme","root","display","paddingTop","flexDirection","justifyContent","alignItems","padding","spacing","margin","width","Login","props","state","auth","currentUser","user","form","classes","dispatch","email","setEmail","password","setPassword","loading","setLoading","isLoggedIn","message","handleSubmit","e","preventDefault","then","history","push","window","location","reload","catch","target","value"],"sources":["/home/projects/pern-app/ui/src/components/auth/login.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\n\nimport './login.css';\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { login } from \"../../actions/auth.actions\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        paddingTop: '60px',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: theme.spacing(2),\n        '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px',\n        },\n        '& .MuiButtonBase-root': {\n        margin: theme.spacing(2),\n        },\n    },\n}));\n\nexport default function Login(props) {\n    const { user: currentUser } = useSelector((state) => state.auth);\n    const form = useRef();\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    // create state variables\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [loading, setLoading] = useState(false);\n    const { isLoggedIn } = useSelector(state => state.auth);\n    const { message } = useSelector(state => state.message);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        setLoading(true);\n        dispatch(login(email, password))\n            .then(() => {\n                props.history.push(\"/\");\n                window.location.reload();\n            }).catch(() => {\n                setLoading(false);\n            }\n        );\n    };\n    \n    if (isLoggedIn) {\n        return <Navigate to=\"/\" />;\n    }\n  \n    if(currentUser) {\n        return <Navigate to=\"/\"/>\n    }\n    return(\n        <div className='flex column flex-center'>\n            <form \n                ref={form}\n                className={classes.root}\n                onSubmit={handleSubmit}>\n                <h2>User login</h2>\n\n                {message && (\n                    <div className=\"alert-danger\" role=\"alert\">\n                        <span>{message}</span>\n                    </div>\n                )}\n\n                <TextField \n                    label=\"Email\"\n                    variant=\"filled\"\n                    type=\"email\"\n                    required\n                    value={email}\n                    onChange={e => setEmail(e.target.value)}\n                />\n                <TextField\n                    label=\"Password\"\n                    variant=\"filled\"\n                    type=\"password\"\n                    value={password}\n                    onChange={e => setPassword(e.target.value)}\n                    required\n                />\n\n                <div>\n                    <span>forgot password</span>\n                    <span>create new account</span>\n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                        login\n                    </Button>\n                </div>\n            </form>\n            {loading && (\n                <div className=\"flex flex-center spinner-wrapper\">\n                    <span>loading ...</span>\n                </div>\n            )}\n        </div>\n    )\n}"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,QAAwC,OAAxC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,OAAO,aAAP;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,mBAAtC;AACA,SAASC,KAAT,QAAsB,4BAAtB;AAEA,IAAMC,SAAS,GAAGF,UAAU,CAAC,UAAAG,KAAK;EAAA,OAAK;IACnCC,IAAI,EAAE;MACFC,OAAO,EAAE,MADP;MAEFC,UAAU,EAAE,MAFV;MAGFC,aAAa,EAAE,QAHb;MAIFC,cAAc,EAAE,QAJd;MAKFC,UAAU,EAAE,QALV;MAMFC,OAAO,EAAEP,KAAK,CAACQ,OAAN,CAAc,CAAd,CANP;MAOF,wBAAwB;QACxBC,MAAM,EAAET,KAAK,CAACQ,OAAN,CAAc,CAAd,CADgB;QAExBE,KAAK,EAAE;MAFiB,CAPtB;MAWF,yBAAyB;QACzBD,MAAM,EAAET,KAAK,CAACQ,OAAN,CAAc,CAAd;MADiB;IAXvB;EAD6B,CAAL;AAAA,CAAN,CAA5B;AAkBA,eAAe,SAASG,KAAT,CAAeC,KAAf,EAAsB;EAAA,mBACHnB,WAAW,CAAC,UAACoB,KAAD;IAAA,OAAWA,KAAK,CAACC,IAAjB;EAAA,CAAD,CADR;EAAA,IACnBC,WADmB,gBACzBC,IADyB;;EAEjC,IAAMC,IAAI,GAAG1B,MAAM,EAAnB;EACA,IAAM2B,OAAO,GAAGnB,SAAS,EAAzB;EACA,IAAMoB,QAAQ,GAAG3B,WAAW,EAA5B,CAJiC,CAMjC;;EANiC,gBAOPF,QAAQ,CAAC,EAAD,CAPD;EAAA;EAAA,IAO1B8B,KAP0B;EAAA,IAOnBC,QAPmB;;EAAA,iBAQD/B,QAAQ,CAAC,EAAD,CARP;EAAA;EAAA,IAQ1BgC,QAR0B;EAAA,IAQhBC,WARgB;;EAAA,iBASHjC,QAAQ,CAAC,KAAD,CATL;EAAA;EAAA,IAS1BkC,OAT0B;EAAA,IASjBC,UATiB;;EAAA,oBAUVhC,WAAW,CAAC,UAAAoB,KAAK;IAAA,OAAIA,KAAK,CAACC,IAAV;EAAA,CAAN,CAVD;EAAA,IAUzBY,UAVyB,iBAUzBA,UAVyB;;EAAA,oBAWbjC,WAAW,CAAC,UAAAoB,KAAK;IAAA,OAAIA,KAAK,CAACc,OAAV;EAAA,CAAN,CAXE;EAAA,IAWzBA,OAXyB,iBAWzBA,OAXyB;;EAajC,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,CAAC,EAAI;IACtBA,CAAC,CAACC,cAAF;IACAL,UAAU,CAAC,IAAD,CAAV;IACAN,QAAQ,CAACrB,KAAK,CAACsB,KAAD,EAAQE,QAAR,CAAN,CAAR,CACKS,IADL,CACU,YAAM;MACRnB,KAAK,CAACoB,OAAN,CAAcC,IAAd,CAAmB,GAAnB;MACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB;IACH,CAJL,EAIOC,KAJP,CAIa,YAAM;MACXZ,UAAU,CAAC,KAAD,CAAV;IACH,CANL;EAQH,CAXD;;EAaA,IAAIC,UAAJ,EAAgB;IACZ,oBAAO,oBAAC,QAAD;MAAU,EAAE,EAAC,GAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACH;;EAED,IAAGX,WAAH,EAAgB;IACZ,oBAAO,oBAAC,QAAD;MAAU,EAAE,EAAC,GAAb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAP;EACH;;EACD,oBACI;IAAK,SAAS,EAAC,yBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IACI,GAAG,EAAEE,IADT;IAEI,SAAS,EAAEC,OAAO,CAACjB,IAFvB;IAGI,QAAQ,EAAE2B,YAHd;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAII;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAJJ,EAMKD,OAAO,iBACJ;IAAK,SAAS,EAAC,cAAf;IAA8B,IAAI,EAAC,OAAnC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAOA,OAAP,CADJ,CAPR,eAYI,oBAAC,SAAD;IACI,KAAK,EAAC,OADV;IAEI,OAAO,EAAC,QAFZ;IAGI,IAAI,EAAC,OAHT;IAII,QAAQ,MAJZ;IAKI,KAAK,EAAEP,KALX;IAMI,QAAQ,EAAE,kBAAAS,CAAC;MAAA,OAAIR,QAAQ,CAACQ,CAAC,CAACS,MAAF,CAASC,KAAV,CAAZ;IAAA,CANf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAZJ,eAoBI,oBAAC,SAAD;IACI,KAAK,EAAC,UADV;IAEI,OAAO,EAAC,QAFZ;IAGI,IAAI,EAAC,UAHT;IAII,KAAK,EAAEjB,QAJX;IAKI,QAAQ,EAAE,kBAAAO,CAAC;MAAA,OAAIN,WAAW,CAACM,CAAC,CAACS,MAAF,CAASC,KAAV,CAAf;IAAA,CALf;IAMI,QAAQ,MANZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EApBJ,eA6BI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,qBADJ,eAEI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,wBAFJ,eAGI,oBAAC,MAAD;IAAQ,IAAI,EAAC,QAAb;IAAsB,OAAO,EAAC,WAA9B;IAA0C,KAAK,EAAC,SAAhD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,WAHJ,CA7BJ,CADJ,EAsCKf,OAAO,iBACJ;IAAK,SAAS,EAAC,kCAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iBADJ,CAvCR,CADJ;AA8CH"},"metadata":{},"sourceType":"module"}