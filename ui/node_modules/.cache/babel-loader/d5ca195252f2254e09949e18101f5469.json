{"ast":null,"code":"import _slicedToArray from \"/home/projects/pern-app/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/projects/pern-app/ui/src/components/auth/register/register.js\";\nimport React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { register } from \"../../../actions/auth.actions\";\nimport './register.css';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: theme.spacing(2),\n      '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px'\n      }\n    }\n  };\n});\nexport default function Register(props) {\n  var _this = this;\n\n  var form = useRef();\n  var classes = useStyles();\n  var dispatch = useDispatch(); // create state variables\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      firstname = _useState2[0],\n      setFirstname = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lastname = _useState4[0],\n      setLastname = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      password = _useState8[0],\n      setPassword = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      loading = _useState10[0],\n      setLoading = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      successful = _useState12[0],\n      setSuccessful = _useState12[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      isLoggedIn = _useSelector.isLoggedIn;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.message;\n  }),\n      message = _useSelector2.message;\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    dispatch(register(firstname, lastname, email, password)).then(function () {\n      setLoading(false);\n      setSuccessful(true);\n      return /*#__PURE__*/React.createElement(Navigate, {\n        to: \"/\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 24\n        }\n      });\n    }).catch(function () {\n      setLoading(false);\n    });\n  };\n\n  if (isLoggedIn) {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex column flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    ref: form,\n    className: classes.root,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, \"register new account\"), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: successful ? \"alert-success\" : \"alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, message)), /*#__PURE__*/React.createElement(TextField, {\n    label: \"firstname\",\n    variant: \"filled\",\n    type: \"text\",\n    value: firstname,\n    onChange: function onChange(e) {\n      return setFirstname(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"lastname\",\n    variant: \"filled\",\n    type: \"text\",\n    value: lastname,\n    onChange: function onChange(e) {\n      return setLastname(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Email\",\n    variant: \"filled\",\n    type: \"email\",\n    required: true,\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Password\",\n    variant: \"filled\",\n    type: \"password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \"register\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, \"I already have an account \\xA0\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 57\n    }\n  }, \"login\")))), loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-center spinner-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, \"loading ...\")));\n}","map":{"version":3,"names":["React","useState","useRef","useDispatch","useSelector","Navigate","Link","Button","TextField","makeStyles","register","useStyles","theme","root","display","flexDirection","justifyContent","alignItems","padding","spacing","margin","width","Register","props","form","classes","dispatch","firstname","setFirstname","lastname","setLastname","email","setEmail","password","setPassword","loading","setLoading","successful","setSuccessful","state","auth","isLoggedIn","message","handleSubmit","e","preventDefault","then","catch","target","value"],"sources":["/home/projects/pern-app/ui/src/components/auth/register/register.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\n\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { register } from \"../../../actions/auth.actions\";\nimport './register.css';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: theme.spacing(2),\n        '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px',\n        }\n    },\n}));\n\nexport default function Register(props) {\n    const form = useRef();\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    // create state variables\n    const [firstname, setFirstname] = useState('');\n    const [lastname, setLastname] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [successful, setSuccessful] = useState(false);\n    const { isLoggedIn } = useSelector(state => state.auth);\n    const { message } = useSelector(state => state.message);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        setLoading(true);\n        dispatch(register(firstname, lastname, email, password))\n            .then(() => {\n                setLoading(false);\n                setSuccessful(true);\n                return <Navigate to=\"/\"/>\n            }).catch(() => {\n                setLoading(false);\n            }\n        );\n    };\n  \n    if(isLoggedIn) {\n        return <Navigate to=\"/\"/>\n    }\n\n    return(\n        <div className='flex column flex-center'>\n            <form \n                ref={form}\n                className={classes.root}\n                onSubmit={handleSubmit}>\n                <h2>register new account</h2>\n\n                {message && (\n                    <div className={ successful ? \"alert-success\" : \"alert-danger\" } role=\"alert\">\n                        <span>{message}</span>\n                    </div>\n                )}\n                <TextField\n                    label=\"firstname\"\n                    variant=\"filled\"\n                    type=\"text\"\n                    value={firstname}\n                    onChange={e => setFirstname(e.target.value)}\n                    required\n                />\n                <TextField\n                    label=\"lastname\"\n                    variant=\"filled\"\n                    type=\"text\"\n                    value={lastname}\n                    onChange={e => setLastname(e.target.value)}\n                    required\n                />\n\n                <TextField \n                    label=\"Email\"\n                    variant=\"filled\"\n                    type=\"email\"\n                    required\n                    value={email}\n                    onChange={e => setEmail(e.target.value)}\n                />\n                <TextField\n                    label=\"Password\"\n                    variant=\"filled\"\n                    type=\"password\"\n                    value={password}\n                    onChange={e => setPassword(e.target.value)}\n                    required\n                />\n\n                <div className='flex column'>\n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                        register\n                    </Button>\n                    <div className='flex actions'>\n                        I already have an account &nbsp;<Link to={\"/login\"}>login</Link>\n                    </div>\n                </div>\n                \n            </form>\n            {loading && (\n                <div className=\"flex flex-center spinner-wrapper\">\n                    <span>loading ...</span>\n                </div>\n            )}\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}