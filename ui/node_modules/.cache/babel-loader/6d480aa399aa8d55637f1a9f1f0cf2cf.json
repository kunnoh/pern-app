{"ast":null,"code":"var _jsxFileName = \"/home/projects/pern-app/pern-ui/src/components/auth/login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport './login.css';\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { login } from \"../../actions/auth.actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    paddingTop: '60px',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: theme.spacing(2),\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: '300px'\n    },\n    '& .MuiButtonBase-root': {\n      margin: theme.spacing(2)\n    }\n  }\n}));\nexport default function Login(props) {\n  _s();\n\n  const {\n    user: currentUser\n  } = useSelector(state => state.auth);\n\n  if (currentUser) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 14\n    }, this);\n  }\n\n  const form = useRef();\n  const classes = useStyles();\n  const dispatch = useDispatch(); // create state variables\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const {\n    isLoggedIn\n  } = useSelector(state => state.auth);\n  const {\n    message\n  } = useSelector(state => state.message);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    dispatch(login(email, password)).then(() => {\n      props.history.push(\"/\");\n      window.location.reload();\n    }).catch(() => {\n      setLoading(false);\n    });\n  };\n\n  if (isLoggedIn) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex column flex-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      ref: form,\n      className: classes.root,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"User login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert-danger\",\n        role: \"alert\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Email\",\n        variant: \"filled\",\n        type: \"email\",\n        required: true,\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Password\",\n        variant: \"filled\",\n        type: \"password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          children: \"login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-center spinner-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"HQkreC7/SKp4In2DPFbI/aLdpmY=\", false, function () {\n  return [useSelector, useStyles, useDispatch, useSelector, useSelector];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useRef","useDispatch","useSelector","Navigate","Button","TextField","makeStyles","login","useStyles","theme","root","display","paddingTop","flexDirection","justifyContent","alignItems","padding","spacing","margin","width","Login","props","user","currentUser","state","auth","form","classes","dispatch","email","setEmail","password","setPassword","loading","setLoading","isLoggedIn","message","handleSubmit","e","preventDefault","then","history","push","window","location","reload","catch","target","value"],"sources":["/home/projects/pern-app/pern-ui/src/components/auth/login.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\n\nimport './login.css';\nimport Button from '@material-ui/core/Button';\nimport { TextField, makeStyles } from '@material-ui/core';\nimport { login } from \"../../actions/auth.actions\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        paddingTop: '60px',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: theme.spacing(2),\n        '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '300px',\n        },\n        '& .MuiButtonBase-root': {\n        margin: theme.spacing(2),\n        },\n    },\n}));\n\nexport default function Login(props) {\n    const { user: currentUser } = useSelector((state) => state.auth);\n    if(currentUser) {\n      return <Navigate to=\"/\"/>\n    }\n    const form = useRef();\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    // create state variables\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [loading, setLoading] = useState(false);\n    const { isLoggedIn } = useSelector(state => state.auth);\n    const { message } = useSelector(state => state.message);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        setLoading(true);\n        dispatch(login(email, password))\n            .then(() => {\n                props.history.push(\"/\");\n                window.location.reload();\n            }).catch(() => {\n                setLoading(false);\n            }\n        );\n    };\n    \n    if (isLoggedIn) {\n        return <Navigate to=\"/\" />;\n    }\n  \n    return(\n        <div className='flex column flex-center'>\n            <form \n                ref={form}\n                className={classes.root}\n                onSubmit={handleSubmit}>\n                <h2>User login</h2>\n\n                {message && (\n                    <div className=\"alert-danger\" role=\"alert\">\n                        <span>{message}</span>\n                    </div>\n                )}\n\n                <TextField \n                    label=\"Email\"\n                    variant=\"filled\"\n                    type=\"email\"\n                    required\n                    value={email}\n                    onChange={e => setEmail(e.target.value)}\n                />\n                <TextField\n                    label=\"Password\"\n                    variant=\"filled\"\n                    type=\"password\"\n                    value={password}\n                    onChange={e => setPassword(e.target.value)}\n                    required\n                />\n\n                <div className='btn-wrapper'> \n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                        login\n                    </Button>\n                </div>\n            </form>\n            {loading && (\n                <div className=\"flex flex-center spinner-wrapper\">\n                    <span>loading ...</span>\n                </div>\n            )}\n        </div>\n    )\n}"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,QAAwC,OAAxC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,OAAO,aAAP;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,mBAAtC;AACA,SAASC,KAAT,QAAsB,4BAAtB;;AAEA,MAAMC,SAAS,GAAGF,UAAU,CAACG,KAAK,KAAK;EACnCC,IAAI,EAAE;IACFC,OAAO,EAAE,MADP;IAEFC,UAAU,EAAE,MAFV;IAGFC,aAAa,EAAE,QAHb;IAIFC,cAAc,EAAE,QAJd;IAKFC,UAAU,EAAE,QALV;IAMFC,OAAO,EAAEP,KAAK,CAACQ,OAAN,CAAc,CAAd,CANP;IAOF,wBAAwB;MACxBC,MAAM,EAAET,KAAK,CAACQ,OAAN,CAAc,CAAd,CADgB;MAExBE,KAAK,EAAE;IAFiB,CAPtB;IAWF,yBAAyB;MACzBD,MAAM,EAAET,KAAK,CAACQ,OAAN,CAAc,CAAd;IADiB;EAXvB;AAD6B,CAAL,CAAN,CAA5B;AAkBA,eAAe,SAASG,KAAT,CAAeC,KAAf,EAAsB;EAAA;;EACjC,MAAM;IAAEC,IAAI,EAAEC;EAAR,IAAwBrB,WAAW,CAAEsB,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAAzC;;EACA,IAAGF,WAAH,EAAgB;IACd,oBAAO,QAAC,QAAD;MAAU,EAAE,EAAC;IAAb;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EACD,MAAMG,IAAI,GAAG1B,MAAM,EAAnB;EACA,MAAM2B,OAAO,GAAGnB,SAAS,EAAzB;EACA,MAAMoB,QAAQ,GAAG3B,WAAW,EAA5B,CAPiC,CASjC;;EACA,MAAM,CAAC4B,KAAD,EAAQC,QAAR,IAAoB/B,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACgC,QAAD,EAAWC,WAAX,IAA0BjC,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACkC,OAAD,EAAUC,UAAV,IAAwBnC,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM;IAAEoC;EAAF,IAAiBjC,WAAW,CAACsB,KAAK,IAAIA,KAAK,CAACC,IAAhB,CAAlC;EACA,MAAM;IAAEW;EAAF,IAAclC,WAAW,CAACsB,KAAK,IAAIA,KAAK,CAACY,OAAhB,CAA/B;;EAEA,MAAMC,YAAY,GAAGC,CAAC,IAAI;IACtBA,CAAC,CAACC,cAAF;IACAL,UAAU,CAAC,IAAD,CAAV;IACAN,QAAQ,CAACrB,KAAK,CAACsB,KAAD,EAAQE,QAAR,CAAN,CAAR,CACKS,IADL,CACU,MAAM;MACRnB,KAAK,CAACoB,OAAN,CAAcC,IAAd,CAAmB,GAAnB;MACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB;IACH,CAJL,EAIOC,KAJP,CAIa,MAAM;MACXZ,UAAU,CAAC,KAAD,CAAV;IACH,CANL;EAQH,CAXD;;EAaA,IAAIC,UAAJ,EAAgB;IACZ,oBAAO,QAAC,QAAD;MAAU,EAAE,EAAC;IAAb;MAAA;MAAA;MAAA;IAAA,QAAP;EACH;;EAED,oBACI;IAAK,SAAS,EAAC,yBAAf;IAAA,wBACI;MACI,GAAG,EAAET,IADT;MAEI,SAAS,EAAEC,OAAO,CAACjB,IAFvB;MAGI,QAAQ,EAAE2B,YAHd;MAAA,wBAII;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJJ,EAMKD,OAAO,iBACJ;QAAK,SAAS,EAAC,cAAf;QAA8B,IAAI,EAAC,OAAnC;QAAA,uBACI;UAAA,UAAOA;QAAP;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,QAPR,eAYI,QAAC,SAAD;QACI,KAAK,EAAC,OADV;QAEI,OAAO,EAAC,QAFZ;QAGI,IAAI,EAAC,OAHT;QAII,QAAQ,MAJZ;QAKI,KAAK,EAAEP,KALX;QAMI,QAAQ,EAAES,CAAC,IAAIR,QAAQ,CAACQ,CAAC,CAACS,MAAF,CAASC,KAAV;MAN3B;QAAA;QAAA;QAAA;MAAA,QAZJ,eAoBI,QAAC,SAAD;QACI,KAAK,EAAC,UADV;QAEI,OAAO,EAAC,QAFZ;QAGI,IAAI,EAAC,UAHT;QAII,KAAK,EAAEjB,QAJX;QAKI,QAAQ,EAAEO,CAAC,IAAIN,WAAW,CAACM,CAAC,CAACS,MAAF,CAASC,KAAV,CAL9B;QAMI,QAAQ;MANZ;QAAA;QAAA;QAAA;MAAA,QApBJ,eA6BI;QAAK,SAAS,EAAC,aAAf;QAAA,uBACI,QAAC,MAAD;UAAQ,IAAI,EAAC,QAAb;UAAsB,OAAO,EAAC,WAA9B;UAA0C,KAAK,EAAC,SAAhD;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,QA7BJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,EAoCKf,OAAO,iBACJ;MAAK,SAAS,EAAC,kCAAf;MAAA,uBACI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IADJ;MAAA;MAAA;MAAA;IAAA,QArCR;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AA4CH;;GA7EuBb,K;UACUlB,W,EAKdM,S,EACCP,W,EAMMC,W,EACHA,W;;;KAdAkB,K"},"metadata":{},"sourceType":"module"}